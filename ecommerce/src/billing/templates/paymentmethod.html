{% extends "base.html" %}{% block title %}Payment Method{% endblock %}{% block content %}    <!-- Create Stripe Payment Form-: https://stripe.com/docs/stripe-js -->    <script src="https://js.stripe.com/v3/"></script><div class='col-10 col-md-6 mx-auto'>    <form class="payment-form" action="/charge" method="POST" id="payment-form" data-token="{{ stripe_publishable_keys }}" data-next-url="{% if nextURL %}{{ nextURL }}{% endif %}">      <div class="form-row">        <label for="card-element">          Credit or debit card        </label>        <div id="card-element" class="form-control">          <!-- A Stripe Element will be inserted here. -->        </div>            <!-- Used to display form errors. -->        <div id="card-errors" role="alert"></div>      </div>          <button class="btn btn-success my-3">Submit Payment</button>        </form> </div>       {% endblock %}            <style>        .StripeElement {          box-sizing: border-box;                  height: 40px;                  padding: 10px 12px;                  border: 1px solid transparent;          border-radius: 4px;          background-color: white;                  box-shadow: 0 1px 3px 0 #e6ebf1;          -webkit-transition: box-shadow 150ms ease;          transition: box-shadow 150ms ease;    }            .StripeElement--focus {          box-shadow: 0 1px 3px 0 #cfd7df;        }                .StripeElement--invalid {          border-color: #fa755a;        }                .StripeElement--webkit-autofill {          background-color: #fefde5 !important;          }    </style>{% block script %}<script src="https://code.jquery.com/jquery-3.5.1.min.js" ></script> <script>     <!-- You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS. -->      // Create a Stripe client.    var stripe = Stripe("pk_test_51HRwMeEcligTwCtGrB70qW1aPm94C4P6f8U3Mdo8CJ1mYFRJau5OH0zeFGq3CXmeGYZ7taXrRKTJwCQGcR5krfpL00jlRIytcR");    // Create an instance of Elements.    var elements = stripe.elements();        // Custom styling can be passed to options when creating an Element.    // (Note that this demo uses a wider set of styles than the guide below.)    var style = {      base: {        color: '#32325d',        fontFamily: '"Helvetica Neue", Helvetica, sans-serif',        fontSmoothing: 'antialiased',        fontSize: '16px',        '::placeholder': {          color: '#aab7c4'        }      },      invalid: {        color: '#fa755a',        iconColor: '#fa755a'      }    };        // Create an instance of the card Element.    var card = elements.create("card", {style: style});        // Add an instance of the card Element into the `card-element` <div>.    card.mount("#card-element");        // Handle form submission.    var form = document.getElementById("payment-form");    var nextURL = $(form).attr("data-next-url");        console.log("next url: "+nextURL)        form.addEventListener("submit", function(event) {      event.preventDefault();          stripe.createToken(card).then(function(result) {        if (result.error) {              // Inform the user if there was an error.              var errorElement = document.getElementById("card-errors");              errorElement.textContent = result.error.message;        } else {              // Send the token to your server.              stripeTokenHandler(nextURL,result.token);              console.log(result.token);        }      });    });    // Submit the form with the token ID.    function stripeTokenHandler(nextURL,token) {        var paymentMethodEndpoint = "/billing/paymentmethod/create/";        var data = {"token":token.id};        $.ajax({            data:data,            url:paymentMethodEndpoint,            method:"POST",            success:function(data){                                console.log(data);                card.clear();                                if (nextURL){                    window.alert("test")                    window.location.href=nextURL                }             },            error:function(error){                console.log(error)            }        })                              } </script>{% endblock %}